paths:
  # NEW ENDPOINT START
  /api/rh-trex/v1/{{.KindLowerPlural}}:
  # NEW ENDPOINT END
    get:
      summary: Returns a list of {{.KindLowerPlural}}
      security:
        - Bearer: []
      responses:
        '200':
          description: A JSON array of {{.KindLowerSingular}} objects
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/{{.Kind}}List'
        '401':
          description: Auth token is invalid
          content:
            application/json:
              schema:
                $ref: 'openapi.yaml#/components/schemas/Error'
        '403':
          description: Unauthorized to perform operation
          content:
            application/json:
              schema:
                $ref: 'openapi.yaml#/components/schemas/Error'
        '500':
          description: Unexpected error occurred
          content:
            application/json:
              schema:
                $ref: 'openapi.yaml#/components/schemas/Error'
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/size'
        - $ref: '#/components/parameters/search'
        - $ref: '#/components/parameters/orderBy'
        - $ref: '#/components/parameters/fields'
    post:
      summary: Create a new {{.KindLowerSingular}}
      security:
        - Bearer: []
      requestBody:
        description: {{.Kind}} data
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/{{.Kind}}'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/{{.Kind}}'
        '400':
          description: Validation errors occurred
          content:
            application/json:
              schema:
                $ref: 'openapi.yaml#/components/schemas/Error'
        '401':
          description: Auth token is invalid
          content:
            application/json:
              schema:
                $ref: 'openapi.yaml#/components/schemas/Error'
        '403':
          description: Unauthorized to perform operation
          content:
            application/json:
              schema:
                $ref: 'openapi.yaml#/components/schemas/Error'
        '409':
          description: {{.Kind}} already exists
          content:
            application/json:
              schema:
                $ref: 'openapi.yaml#/components/schemas/Error'
        '500':
          description: An unexpected error occurred creating the {{.KindLowerSingular}}
          content:
            application/json:
              schema:
                $ref: 'openapi.yaml#/components/schemas/Error'
  # NEW ENDPOINT START
  /api/rh-trex/v1/{{.KindLowerPlural}}/{id}:
  # NEW ENDPOINT END
    get:
      summary: Get an {{.KindLowerSingular}} by id
      security:
        - Bearer: []
      responses:
        '200':
          description: {{.Kind}} found by id
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/{{.Kind}}'
        '401':
          description: Auth token is invalid
          content:
            application/json:
              schema:
                $ref: 'openapi.yaml#/components/schemas/Error'
        '403':
          description: Unauthorized to perform operation
          content:
            application/json:
              schema:
                $ref: 'openapi.yaml#/components/schemas/Error'
        '404':
          description: No {{.KindLowerSingular}} with specified id exists
          content:
            application/json:
              schema:
                $ref: 'openapi.yaml#/components/schemas/Error'
        '500':
          description: Unexpected error occurred
          content:
            application/json:
              schema:
                $ref: 'openapi.yaml#/components/schemas/Error'
    patch:
      summary: Update an {{.KindLowerSingular}}
      security:
        - Bearer: []
      requestBody:
        description: Updated {{.KindLowerSingular}} data
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/{{.Kind}}PatchRequest'
      responses:
        '200':
          description: {{.Kind}} updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/{{.Kind}}'
        '400':
          description: Validation errors occurred
          content:
            application/json:
              schema:
                $ref: 'openapi.yaml#/components/schemas/Error'
        '401':
          description: Auth token is invalid
          content:
            application/json:
              schema:
                $ref: 'openapi.yaml#/components/schemas/Error'
        '403':
          description: Unauthorized to perform operation
          content:
            application/json:
              schema:
                $ref: 'openapi.yaml#/components/schemas/Error'
        '404':
          description: No {{.KindLowerSingular}} with specified id exists
          content:
            application/json:
              schema:
                $ref: 'openapi.yaml#/components/schemas/Error'
        '409':
          description: {{.Kind}} already exists
          content:
            application/json:
              schema:
                $ref: 'openapi.yaml#/components/schemas/Error'
        '500':
          description: Unexpected error updating {{.KindLowerSingular}}
          content:
            application/json:
              schema:
                $ref: 'openapi.yaml#/components/schemas/Error'
    parameters:
      - $ref: '#/components/parameters/id'
components:
  schemas:
    # NEW SCHEMA START
    {{.Kind}}:
    # NEW SCHEMA END
      allOf:
        - $ref: 'openapi.yaml#/components/schemas/ObjectReference'
        - type: object
          properties:
            foo:
              type: string
    # NEW SCHEMA START
    {{.Kind}}List:
    # NEW SCHEMA END
      allOf:
        - $ref: 'openapi.yaml#/components/schemas/List'
        - type: object
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/{{.Kind}}'
    # NEW SCHEMA START
    {{.Kind}}PatchRequest:
    # NEW SCHEMA END
      type: object
